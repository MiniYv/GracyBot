# Update_Plugin 插件

## 插件介绍
Update_Plugin是GracyBot的智能系统更新模块，采用先进的仓库选择算法，提供快速、可靠的系统更新服务。

## 功能特性
- **智能仓库选择**：自动选择响应最快的可用仓库（GitHub/码云）
- **并行连接测试**：使用多线程同时测试仓库连接速度
- **快速切换机制**：GitHub失败时毫秒级切换到码云仓库
- **缓存优化**：智能缓存最佳仓库，避免重复测试
- **系统更新检查**：响应"/系统更新"命令，检查可用更新
- **自动更新功能**：支持定时自动检查更新
- **更新状态反馈**：提供详细的更新状态和仓库选择信息

## 技术特点
- **超快速响应**：并行测试+缓存机制，总响应时间控制在3秒内
- **智能容错**：多级重试策略，确保更新服务的高可用性
- **响应时间记录**：实时记录各仓库的响应时间数据
- **线程安全**：完善的线程管理和异常处理机制
- **配置灵活**：支持通过配置文件自定义更新参数

## 仓库支持
- **GitHub**：`https://github.com/MiniYv/GracyBot.git`
- **码云**：`https://gitee.com/MiniYv/GracyBot.git`（国内镜像，需自行配置）

## 智能选择算法
1. **缓存优先**：极速检查缓存仓库（0.5秒超时）
2. **并行测试**：同时测试GitHub和码云（2秒超时）
3. **快速切换**：优先返回最先成功的仓库
4. **串行重试**：并行失败后使用快速串行重试（1秒超时）
5. **默认备用**：所有尝试失败后默认使用GitHub

## 使用方法
### 手动更新检查
- 在群聊或私聊中发送"/系统更新"命令触发更新检查

### 自动更新设置
- "/开启自动更新"：启用定时自动检查
- "/关闭自动更新"：禁用自动检查功能
- "/设置自动更新间隔 [分钟]"：自定义检查间隔

### 仓库管理
- 系统自动选择最佳仓库，无需手动干预
- 支持码云仓库作为国内镜像（需注册码云账号）

## 性能指标
- **仓库选择时间**：< 3秒
- **连接测试超时**：2秒（并行）/ 1秒（重试）
- **缓存检查**：0.5秒
- **支持仓库数**：2个（GitHub + 码云）

## 版本信息
- **版本**：2.0.0（智能仓库选择版）
- **作者**：GracyBot开发团队
- **最后更新**：2025-11-25
- **核心特性**：智能仓库选择、快速切换、并行测试

## 版权声明
© 2025 GracyBot. 保留所有权利。

本插件仅用于GracyBot项目，未经授权不得用于其他项目。